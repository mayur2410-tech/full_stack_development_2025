# Assignment: API Testing with Next.js (App Router) and MongoDB

In this assignment, you will work with an existing **Next.js project** that exposes several API endpoints connected to a MongoDB database. Your job is to **design and run Playwright tests** for these APIs.

---

## APIs Available

You have **6 GET endpoints** to work with. Each one returns data from the `companies` collection.

### 1. `GET /api/companies/count`

* **Purpose**: Returns the total number of companies that match optional filters.
* **Query Parameters**:

  * `name` (optional) → filter by company name
  * `location` (optional) → filter by location
  * `skill` (optional) → filter by hiring criteria skills
* **Expected Response Shape**:

  ```json
  { "total": 19 }
  ```

---

### 2. `GET /api/companies/top-paid`

* **Purpose**: Returns companies sorted by **base salary** in descending order.
* **Query Parameters**:

  * `limit` (optional, default 5, max 50) → number of companies to return
* **Expected Behavior**: Companies should appear from **highest to lowest base salary**.

---

### 3. `GET /api/companies/by-skill/:skill`

* **Purpose**: Returns companies that require a given `skill` in their `hiringCriteria.skills` array.
* **Parameter**:

  * `:skill` → skill name (case-insensitive)
* **Example**: `/api/companies/by-skill/DSA`

---

### 4. `GET /api/companies/by-location/:location`

* **Purpose**: Returns companies located in the given city/location.
* **Parameter**:

  * `:location` → location name (case-insensitive)
* **Example**: `/api/companies/by-location/Hyderabad`

---

### 5. `GET /api/companies/headcount-range`

* **Purpose**: Returns companies whose `headcount` falls within the given range.
* **Query Parameters**:

  * `min` (default 0) → minimum headcount
  * `max` (optional) → maximum headcount
* **Example**: `/api/companies/headcount-range?min=1000&max=5000`

---

### 6. `GET /api/companies/benefit/:benefit`

* **Purpose**: Returns companies that provide a given benefit.
* **Parameter**:

  * `:benefit` → benefit string (case-insensitive, substring match allowed)
* **Example**: `/api/companies/benefit/Insurance`

---

## What You Need to Do

For each of the 6 APIs, write **Playwright test cases** that check the following aspects:

---

### 1. `GET /api/companies/count`

* Verify it returns the **total number of companies** when no filters are applied.
* Verify it returns a **smaller number** when filtering by `name` (e.g., Microsoft).
* Verify it returns **0** when filtering by a non-existing company name.

---

### 2. `GET /api/companies/top-paid`

* Verify it returns a **maximum of 5 items** by default.
* Verify the list is **sorted in descending order** by `salaryBand.base`.
* Verify the `limit` parameter works (e.g., `limit=10` should return up to 10).

---

### 3. `GET /api/companies/by-skill/:skill`

* Verify it returns companies that **include the skill** in `hiringCriteria.skills`.
* Verify it works case-insensitively (`DSA` and `dsa` should behave the same).
* Verify it returns an **empty result** for a non-existing skill.

---

### 4. `GET /api/companies/by-location/:location`

* Verify it returns companies whose **location matches** the given parameter.
* Verify it works case-insensitively (`Hyderabad` and `hyderabad` should give the same result).
* Verify it returns an **empty result** for a location that doesn’t exist.

---

### 5. `GET /api/companies/headcount-range`

* Verify it returns companies with `headcount >= min` when only `min` is given.
* Verify it returns companies with `headcount` between `min` and `max` when both are provided.
* Verify it handles invalid input (e.g., `min=abc`) gracefully — should return 400 or fallback to default behavior.

---

### 6. `GET /api/companies/benefit/:benefit`

* Verify it returns companies that list the given benefit.
* Verify it works with partial match (e.g., `Insurance` should match `"Health Insurance"`).
* Verify it works case-insensitively.
* Verify it returns an empty array if no company offers that benefit.

---

