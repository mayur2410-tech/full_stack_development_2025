# Final Keyword in Java

The `final` keyword in Java is a **non-access modifier** that imposes restrictions on variables, methods, or classes, preventing modification, overriding, or inheritance. It guarantees immutability and consistency in your codebase, playing a critical role in writing secure, maintainable, and optimized Java programs.

***

## Uses of Final Keyword

The `final` keyword can be applied to:

1. **Variables** – To represent constants or immutable references.
2. **Methods** – To prevent method overriding.
3. **Classes** – To restrict inheritance of classes.

***

## Final Variables

- When a variable is declared `final`, its **value cannot be changed after initialization**.
- Final variables **must be initialized** either at declaration or in the constructor.
- In case of **reference variables**, the *reference* cannot change after initialization, but the object it refers to can be modified (unless the object itself is immutable).


### Example: Final Variables

```java
public class Constants {
    final double PI = 3.14159;        // Initialized at declaration
    final int WIDTH;
    
    public Constants(int width) {
        WIDTH = width;                // Initialized in constructor
    }
    
    public static void main(String[] args) {
        Constants c = new Constants(100);
        System.out.println("PI: " + c.PI);
        System.out.println("Width: " + c.WIDTH);
        // c.PI = 3.14;              // Compile-time error, final value cannot be changed
        // c.WIDTH = 120;            // Compile-time error, final value cannot be reassigned
    }
}
```


***

## Final Methods

- Declaring a method with `final` means **it cannot be overridden** by any subclass.
- Useful when you want to **preserve method behavior** in inheritance hierarchies.
- Helps prevent accidental or malicious modifications.


### Example: Final Method

```java
class Parent {
    public final void show() {
        System.out.println("Final method in Parent.");
    }
}

class Child extends Parent {
    // Attempt to override results in a compile-time error
    // public void show() {
    //     System.out.println("Overridden method in Child.");
    // }
}

public class TestFinalMethod {
    public static void main(String[] args) {
        Child c = new Child();
        c.show();  // Calls method from Parent
    }
}
```


***

## Final Classes

- A class declared as `final` **cannot be subclassed or extended**.
- Useful for **immutable classes** or when you want to enforce no further derivation.
- The `String` class in Java is a classic example of a final class.


### Example: Final Class

```java
public final class MathUtil {
    public static int square(int n) {
        return n * n;
    }
}

// The following inheritance is not allowed and will give compile error
// class MyMathUtil extends MathUtil {
// }
```


***

## Why and When to Use Final?

### Ensures Immutability

- Final variables are constants ensuring values do not change once assigned.
- This enhances **program correctness** and prevents bugs due to value reassignment.


### Prevents Method Overriding

- Final methods help keep **consistent behavior** across class hierarchies.
- Essential for API design and **security** (e.g., prevent altering sensitive methods).


### Prevents Class Inheritance

- Final classes avoid **unintended inheritance**, preserving controlled design.
- Can improve **performance** by allowing JVM optimizations like method inlining.


### Thread Safety

- Final fields initialized during object construction are **safe** in multithreaded environments.
- Guarantees visibility of the final variables’ value to other threads.

***

## Important Details and Behavior

| Context | Behavior of final | Notes |
| :-- | :-- | :-- |
| Variables | Value/reference cannot change | Objects referenced by final can be mutable |
| Methods | Cannot be overridden | Allows consistent behavior |
| Classes | Cannot be subclassed | Used to build immutable or special classes |


***

## Final with Local Variables and Parameters

- Local variables can be declared final to make them **effectively constants** within a method.
- Method parameters declared final **cannot be reassigned** within the method.

***

## Examples of Final Local Variable and Parameter

```java
public class FinalExample {
    public void print(final String message) {
        // message = "New Message"; // Compile-time error
        final int count = 5;
        // count = 10;             // Compile-time error
        for(int i = 0; i < count; i++) {
            System.out.println(message);
        }
    }
}
```


***

## Final and Performance Optimization

- The JVM can optimize **final fields and methods** as the values and behavior are fixed.
- For example, **inlining** a final method call can improve runtime performance.
- However, the JVM treats final mostly as a **compile-time restriction** rather than a strict runtime performance feature.

***

## Summary Table: Final Keyword in Java

| Final Usage | Purpose | Effect | Example |
| :-- | :-- | :-- | :-- |
| Final Variable | Immutable variable reference | Value/reference unchangeable after assignment | `final int x = 10;` |
| Final Method | Method behavior unchangeable | No overriding allowed in subclasses | `public final void display() {}` |
| Final Class | Prevent subclassing | No class can extend a final class | `public final class Math {}` |
| Local Variables | Prevent reassignment | Variable value cannot be reassigned | `final int y = 5;` |
| Parameters | Immutable method argument | Parameter cannot be reassigned inside method | `void process(final String s)` |


***

## Additional Insights

- The `final` keyword plays a **vital role in API design** validating constants, guaranteeing method behavior, and sealing class hierarchies.
- It contributes to **thread safety** and **code security** by preventing unauthorized changes.
- Use it judiciously to document **intent clearly** and enable maintainable, robust Java code.

***